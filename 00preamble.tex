\usepackage{color}
\usepackage{listings}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}

\lstnewenvironment{algorithm}[1][]{ %defines the algorithm listing environment
	\lstset{ %this is the stype
		mathescape=true,
		frame=tB,
		numbers=left, 
		numberstyle=\tiny,
		basicstyle=\scriptsize, 
		keywordstyle=\color{black}\bfseries\em,
		keywords={, return, datatype, function, in, if, else, foreach, while, begin, end, to, } %add the keywords you want, or load a language as Rubens explains in his comment above.
		numbers=left,
		xleftmargin=.04\textwidth,
		#1 % this is to add specific settings to an usage of this environment (for instnce, the caption and referable label)
	}
}{}